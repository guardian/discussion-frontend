define(function(){"use strict";function e(e,t){if("undefined"==typeof document)return t;e=e||"";var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");return r.type="text/css",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),n.appendChild(r),t}function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}function n(e,t,n){this.nodeName=e,this.attributes=t,this.children=n,this.key=t&&t.key}function r(e,t){if(t)for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}function o(e){return r({},e)}function i(e,t){for(var n=t.split("."),r=0;r<n.length&&e;r++)e=e[n[r]];return e}function a(e){return"function"==typeof e}function s(e){return"string"==typeof e}function u(e){return void 0===e||null===e}function l(e){return e===!1||u(e)}function c(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}function f(e,t,r){var o=arguments.length,i=void 0,u=void 0,d=void 0;if(o>2){var p=void 0===r?"undefined":we(r);if(3===o&&"object"!==p&&"function"!==p)l(r)||(i=[r+""]);else{i=[];for(var h=2;h<o;h++){var m=arguments[h];if(!l(m)){m.join?u=m:(u=je)[0]=m;for(var v=0;v<u.length;v++){var y=u[v],b=!(l(y)||a(y)||y instanceof n);b&&!s(y)&&(y+=""),b&&d?i[i.length-1]+=y:l(y)||(i.push(y),d=b)}}}}}else if(t&&t.children)return f(e,t,t.children);t&&(t.children&&delete t.children,a(e)||("className"in t&&(t.class=t.className,delete t.className),d=t.class,d&&!s(d)&&(t.class=c(d))));var _=new n(e,t||void 0,i);return ve.vnode&&ve.vnode(_),_}function d(e,t,n){var r=t.split("."),o=r[0];return function(t){var a=t&&t.currentTarget||this,u=e.state,l=u,c=void 0,f=void 0;if(c=s(n)?i(t,n):a.nodeName?(a.nodeName+a.type).match(/^input(check|rad)/i)?a.checked:a.value:t,r.length>1){for(f=0;f<r.length-1;f++)l=l[r[f]]||(l[r[f]]={});l[r[f]]=c,c=u[o]}e.setState(Ce({},o,c))}}function p(e){1===He.push(e)&&(ve.debounceRendering||ge)(h)}function h(){if(He.length){var e=He,t=void 0;for(He=Ae,Ae=e;t=e.pop();)t._dirty&&W(t)}}function m(e){var t=e&&e.nodeName;return t&&a(t)&&!(t.prototype&&t.prototype.render)}function v(e,t){return e.nodeName(T(e),t||Be)}function y(e,t){return e[Re]||(e[Re]=t||{})}function b(e){return e instanceof Text?3:e instanceof Element?1:0}function _(e){var t=e.parentNode;t&&t.removeChild(e)}function g(e,t,n,r,o){if(y(e)[t]=n,"key"!==t&&"children"!==t&&"innerHTML"!==t)if("class"!==t||o)if("style"===t){if((!n||s(n)||s(r))&&(e.style.cssText=n||""),n&&"object"===(void 0===n?"undefined":we(n))){if(!s(r))for(var i in r)i in n||(e.style[i]="");for(var c in n)e.style[c]="number"!=typeof n[c]||Ue[c]?n[c]:n[c]+"px"}}else if("dangerouslySetInnerHTML"===t)n&&(e.innerHTML=n.__html);else if("o"==t[0]&&"n"==t[1]){var f=e._listeners||(e._listeners={});t=be(t.substring(2)),n?f[t]||e.addEventListener(t,x,!!De[t]):f[t]&&e.removeEventListener(t,x,!!De[t]),f[t]=n}else if("list"!==t&&"type"!==t&&!o&&t in e)w(e,t,u(n)?"":n),l(n)&&e.removeAttribute(t);else{var d=o&&t.match(/^xlink\:?(.+)/);l(n)?d?e.removeAttributeNS("http://www.w3.org/1999/xlink",be(d[1])):e.removeAttribute(t):"object"===(void 0===n?"undefined":we(n))||a(n)||(d?e.setAttributeNS("http://www.w3.org/1999/xlink",be(d[1]),n):e.setAttribute(t,n))}else e.className=n||""}function w(e,t,n){try{e[t]=n}catch(e){}}function x(e){return this._listeners[e.type](ve.event&&ve.event(e)||e)}function N(e){for(var t={},n=e.attributes.length;n--;)t[e.attributes[n].name]=e.attributes[n].value;return t}function C(e,t){return s(t)?3===b(e):s(t.nodeName)?P(e,t.nodeName):a(t.nodeName)?e._componentConstructor===t.nodeName||m(t):void 0}function P(e,t){return e.normalizedNodeName===t||be(e.nodeName)===be(t)}function T(e){var t=e.nodeName.defaultProps,n=o(t||e.attributes);return t&&r(n,e.attributes),e.children&&(n.children=e.children),n}function k(e){if(_(e),1===b(e)){S(e);var t=be(e.nodeName),n=Le[t];n?n.push(e):Le[t]=[e]}}function j(e,t){var n=be(e),r=Le[n]&&Le[n].pop()||(t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e));return y(r),r.normalizedNodeName=n,r}function S(e){y(e,N(e)),e._component=e._componentConstructor=null}function E(){for(var e=void 0;e=Me.pop();)e.componentDidMount&&e.componentDidMount()}function O(e,t,n,r,o,i){We++;var a=I(e,t,n,r,i);return o&&a.parentNode!==o&&o.appendChild(a),--We||E(),a}function I(e,t,n,r,o){for(var i=t&&t.attributes;m(t);)t=v(t,n);if(u(t)&&(t="",o)){if(e){if(8===e.nodeType)return e;U(e)}return document.createComment(t)}if(s(t)){if(e){if(3===b(e)&&e.parentNode)return e.nodeValue=t,e;U(e)}return document.createTextNode(t)}var l=e,c=t.nodeName,f=Fe;if(a(c))return F(e,t,n,r);if(s(c)||(c+=""),Fe="svg"===c||"foreignObject"!==c&&Fe,e){if(!P(e,c)){for(l=j(c,Fe);e.firstChild;)l.appendChild(e.firstChild);U(e)}}else l=j(c,Fe);return t.children&&1===t.children.length&&"string"==typeof t.children[0]&&1===l.childNodes.length&&l.firstChild instanceof Text?l.firstChild.nodeValue=t.children[0]:(t.children||l.firstChild)&&B(l,t.children,n,r),D(l,t.attributes),i&&i.ref&&(l[Re].ref=i.ref)(l),Fe=f,l}function B(e,t,n,r){var o=e.childNodes,i=[],s={},l=0,c=0,f=o.length,d=0,p=t&&t.length,h=void 0,m=void 0,v=void 0,y=void 0;if(f)for(var b=0;b<f;b++){var _=o[b],g=p?(m=_._component)?m.__key:(m=_[Re])?m.key:null:null;g||0===g?(l++,s[g]=_):i[d++]=_}if(p)for(var w=0;w<p;w++){v=t[w],y=null;var x=v.key;if(u(x)){if(!y&&c<d){for(h=c;h<d;h++)if(m=i[h],m&&C(m,v)){y=m,i[h]=void 0,h===d-1&&d--,h===c&&c++;break}!y&&c<d&&a(v.nodeName)&&r&&(y=i[c],i[c++]=void 0)}}else l&&x in s&&(y=s[x],s[x]=void 0,l--);y=I(y,v,n,r),y!==o[w]&&e.insertBefore(y,o[w]||null)}if(l)for(var N in s)s[N]&&(i[c=d++]=s[N]);c<d&&R(i)}function R(e,t){for(var n=e.length;n--;){var r=e[n];r&&U(r,t)}}function U(e,t){var n=e._component;n?G(n,!t):(e[Re]&&e[Re].ref&&e[Re].ref(null),t||k(e),e.childNodes&&e.childNodes.length&&R(e.childNodes,t))}function D(e,t){var n=e[Re]||N(e);for(var r in n)t&&r in t||g(e,r,null,n[r],Fe);if(t)for(var o in t)o in n&&t[o]==n[o]&&("value"!==o&&"checked"!==o||t[o]==e[o])||g(e,o,t[o],n[o],Fe)}function H(e){var t=e.constructor.name,n=Ge[t];n?n.push(e):Ge[t]=[e]}function A(e,t,n){var r=new e(t,n),o=Ge[e.name];if(r.props=t,r.context=n,o)for(var i=o.length;i--;)if(o[i].constructor===e){r.nextBase=o[i].nextBase,o.splice(i,1);break}return r}function L(e){e._dirty||(e._dirty=!0,p(e))}function M(e,t,n,r,o){var i=e.base;e._disableRendering||(e._disableRendering=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,u(i)||o?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disableRendering=!1,n!==Se&&(n!==Ee&&ve.syncComponentUpdates===!1&&i?L(e):W(e,Ee,o)),e.__ref&&e.__ref(e))}function W(e,t,n){if(!e._disableRendering){var i=void 0,s=void 0,u=e.props,l=e.state,c=e.context,f=e.prevProps||u,d=e.prevState||l,p=e.prevContext||c,h=e.base,y=h||e.nextBase,b=e._component;if(h&&(e.props=f,e.state=d,e.context=p,t!==Oe&&e.shouldComponentUpdate&&e.shouldComponentUpdate(u,l,c)===!1?i=!0:e.componentWillUpdate&&e.componentWillUpdate(u,l,c),e.props=u,e.state=l,e.context=c),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!i){for(e.render&&(s=e.render(u,l,c)),e.getChildContext&&(c=r(o(c),e.getChildContext()));m(s);)s=v(s,c);var _=s&&s.nodeName,g=void 0,w=void 0;if(a(_)&&_.prototype.render){var x=b,N=T(s);x&&x.constructor===_?M(x,N,Ee,c):(g=x,x=A(_,N,c),x.nextBase=x.nextBase||n&&y,x._parentComponent=e,e._component=x,M(x,N,Se,c),W(x,Ee)),w=x.base}else{var C=y;g=b,g&&(C=e._component=null),(y||t===Ee)&&(C&&(C._component=null),w=O(C,s,c,n||!h,y&&y.parentNode,!0))}if(y&&w!==y){var P=y.parentNode;P&&w!==P&&P.replaceChild(w,y),!g&&e._parentComponent&&(y._component=null,U(y))}if(g&&G(g,w!==y),e.base=w,w){for(var k=e,j=e;j=j._parentComponent;)k=j;w._component=k,w._componentConstructor=k.constructor}}!h||n?(Me.unshift(e),We||E()):!i&&e.componentDidUpdate&&e.componentDidUpdate(f,d,p);var S=e._renderCallbacks,I=void 0;if(S)for(;I=S.pop();)I.call(e);return s}}function F(e,t,n,r){for(var o=e&&e._component,i=e,a=o&&e._componentConstructor===t.nodeName,s=a,u=T(t);o&&!s&&(o=o._parentComponent);)s=o.constructor===t.nodeName;return!s||r&&!o._component?(o&&!a&&(G(o,!0),e=i=null),o=A(t.nodeName,u,n),e&&!o.nextBase&&(o.nextBase=e),M(o,u,Ee,n,r),e=o.base,i&&e!==i&&(i._component=null,U(i))):(M(o,u,Ie,n,r),e=o.base),e}function G(e,t){var n=e.base;e._disableRendering=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var r=e._component;r?G(r,t):n&&(n[Re]&&n[Re].ref&&n[Re].ref(null),e.nextBase=n,t&&(_(n),H(e)),R(n.childNodes,!t)),e.__ref&&e.__ref(null),e.componentDidUnmount&&e.componentDidUnmount()}function q(e,t){this._dirty=!0,this._disableRendering=!1,this.prevState=this.prevProps=this.prevContext=this.base=this.nextBase=this._parentComponent=this._component=this.__ref=this.__key=this._linkedStates=this._renderCallbacks=null,this.context=t,this.props=e,this.state=this.getInitialState&&this.getInitialState()||{}}function z(e,t,n){return O(n,e,{},!1,t)}function $(e,t,n){var r=t._preactCompatRendered;r&&r.parentNode!==t&&(r=null),r||(r=t.children[0]);for(var o=t.childNodes.length;o--;)t.childNodes[o]!==r&&t.removeChild(t.childNodes[o]);var i=z(e,t,r);return t._preactCompatRendered=i,"function"==typeof n&&n(),i&&i._component||i.base}function X(e){return Y.bind(null,e)}function J(e,t){for(var n=t||0;n<e.length;n++){var r=e[n];Array.isArray(r)?J(r):r&&"object"===(void 0===r?"undefined":we(r))&&!ee(r)&&(r.props&&r.type||r.attributes&&r.nodeName||r.children)&&(e[n]=Y(r.type||r.nodeName,r.props||r.attributes,r.children))}}function V(e){return"function"==typeof e&&!(e.prototype&&e.prototype.render)}function K(e){return function(t,n){return ue.call(e,t,n),e(t,n)}}function Q(e){var t=e[Ze];return t?t===!0?e:t:(t=K(e),Object.defineProperty(t,Ze,{configurable:!0,value:!0}),t.displayName=e.displayName,t.propTypes=e.propTypes,t.defaultProps=e.defaultProps,Object.defineProperty(e,Ze,{configurable:!0,value:t}),t)}function Y(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return J(t,2),Z(f.apply(void 0,t))}function Z(e){re(e),V(e.nodeName)&&(e.nodeName=Q(e.nodeName));var t=e.attributes&&e.attributes.ref,n=t&&(void 0===t?"undefined":we(t));return!Ke||"string"!==n&&"number"!==n||(e.attributes.ref=te(t,Ke)),ne(e),e}function ee(e){return e&&(e instanceof Je||e.$$typeof===ze)}function te(e,t){return t._refProxies[e]||(t._refProxies[e]=function(n){t&&t.refs&&(t.refs[e]=n,null===n&&(delete t._refProxies[e],t=null))})}function ne(e){var t=e.nodeName,n=e.attributes;if(n&&"string"==typeof t){var r={};for(var o in n)r[o.toLowerCase()]=o;if(r.onchange){t=t.toLowerCase();var i="input"===t&&"checkbox"===(n.type+"").toLowerCase()?"onclick":"oninput",a=r[i]||i;n[a]||(n[a]=ae(n[r[i]],n[r.onchange]))}}}function re(e){var t=e.attributes;if(t){var n=t.className||t.class;n&&(t.className=n)}}function oe(e,t,n){for(var r in t)n!==!0&&null==t[r]||(e[r]=t[r]);return e}function ie(e,t,n){if("string"==typeof t&&(t=e.constructor.prototype[t]),"function"==typeof t)return t.apply(e,n)}function ae(){var e=arguments;return function(){for(var t=void 0,n=0;n<e.length;n++){var r=ie(this,e[n],arguments);void 0!==r&&(t=r)}return t}}function se(e,t){ue.call(this,e,t),this.componentWillReceiveProps=ae(ue,this.componentWillReceiveProps||"componentWillReceiveProps"),this.render=ae(ue,le,this.render||"render",ce)}function ue(e,t){if(e){var n=e.children;if(Array.isArray(n)&&1===n.length&&(e.children=n[0],e.children&&"object"===we(e.children)&&(e.children.length=1,e.children[0]=e.children)),Xe){var r="function"==typeof this?this:this.constructor,o=this.propTypes||r.propTypes;if(o)for(var i in o)if(o.hasOwnProperty(i)&&"function"==typeof o[i]){var a=this.displayName||r.name,s=o[i](e,i,a,"prop");s&&console.error(Error(s.message||s))}}}}function le(e){Ke=this}function ce(){Ke===this&&(Ke=null)}function fe(e,t,n){q.call(this,e,t),this.refs={},this._refProxies={},n!==$e&&se.call(this,e,t)}function de(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("/").replace(/([^:])\/+/g,"$1/")}function pe(e){function t(t){return fetch(t,{mode:"cors"}).then(function(t){return t.ok?t.json():e.reject(Error("fetch error: "+t.statusText))})}function n(t){return new e(function(e,n){var r="jp_"+Math.floor(100*Math.random())+(new Date).getTime(),o=[t,"callback="+r].join(t.indexOf("?")===-1?"?":"&");window[r]=e;var i=document.createElement("script");i.src=o,i.onerror=function(){n(Error("JSONP network error on "+o))},document.head.appendChild(i)})}return{json:t,jsonp:n}}function he(e){function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=de(r,"getCommentCounts?short-urls="+t.join(","));return u(o).catch(function(e){throw ut.emit("error","comments-count",e),e})}function n(){var e=arguments.length<=0||void 0===arguments[0]?"me":arguments[0],t=de(r,"/profile/"+e);return c(t).then(function(e){if("ok"!==e.status)throw Error("Invalid user profile status: "+e.status);return e.userProfile}).catch(function(e){throw ut.emit("error","user-profile",e),e})}var r=e.apiHost,o=e.net,i=e.Promise,a=pe(i),s=o.json,u=void 0===s?a.json:s,l=o.jsonp,c=void 0===l?a.jsonp:l;return{commentCount:t,userProfile:n}}function me(e){var t=e.apiHost,n=e.avatarImagesHost,r=e.closed,o=e.discussionId,i=e.element,a=e.net,s=void 0===a?{}:a,u=e.profileUrl,l=e.profileClientId,c=e.user,f=e.userFromCookie,d=e.Promise,p=void 0===d?window.Promise:d,h=he({apiHost:t,net:s,Promise:p}),m=Y(lt,{id:o,api:h,avatarImagesHost:n,profileUrl:u,profileClientId:l,closed:r,user:c,userFromCookie:f});return new p(function(e){$(m,i,function(){return e(ut)})})}var ve=(t(function(e){e.exports={}}),{}),ye={},be=function(e){return ye[e]||(ye[e]=e.toLowerCase())},_e="undefined"!=typeof Promise&&Promise.resolve(),ge=_e?function(e){_e.then(e)}:setTimeout,we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},xe=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Ne=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ce=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Te=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ke=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},je=[],Se=0,Ee=1,Oe=2,Ie=3,Be={},Re="undefined"!=typeof Symbol?Symbol.for("preactattr"):"__preactattr_",Ue={boxFlex:1,boxFlexGroup:1,columnCount:1,fillOpacity:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,strokeOpacity:1,widows:1,zIndex:1,zoom:1},De={blur:1,error:1,focus:1,load:1,resize:1,scroll:1},He=[],Ae=[],Le={},Me=[],We=0,Fe=!1,Ge={};r(q.prototype,{linkState:function(e,t){var n=this._linkedStates||(this._linkedStates={}),r=e+"|"+t;return n[r]||(n[r]=d(this,e,t))},setState:function(e,t){var n=this.state;this.prevState||(this.prevState=o(n)),r(n,a(e)?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),L(this)},forceUpdate:function(){W(this,Oe)},render:function(){return null}});var qe="a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn dialog div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param picture pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan".split(" "),ze="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,$e={},Xe=!1,Je=f("").constructor;Je.prototype.$$typeof=ze,Object.defineProperty(Je.prototype,"type",{get:function(){return this.nodeName},set:function(e){this.nodeName=e},configurable:!0}),Object.defineProperty(Je.prototype,"props",{get:function(){return this.attributes},set:function(e){this.attributes=e},configurable:!0});var Ve=ve.vnode;ve.vnode=function(e){var t=e.attributes,n=e.nodeName;if(t||(t=e.attributes={}),"function"==typeof n){var r=n[Ze]===!0,o=n;if(!r)do if(o instanceof fe){r=!0;break}while((o=o.prototype)&&o!==Function&&o!==Object);if(r&&(Z(e),n.defaultProps))for(var i in n.defaultProps)n.defaultProps.hasOwnProperty(i)&&null==t[i]&&(t[i]=n.defaultProps[i])}Object.isExtensible&&!Object.isExtensible(t)&&(t=oe({},t,!0)),t.children=e.children,Ve&&Ve(e)};for(var Ke=(function(){function e(){xe(this,e)}return Ne(e,[{key:"getChildContext",value:function(){return this.props.context}},{key:"render",value:function(e){return e.children[0]}}]),e}(),void 0),Qe={},Ye=qe.length;Ye--;)Qe[qe[Ye]]=X(qe[Ye]);var Ze="undefined"!=typeof Symbol?Symbol.for("__preactCompatWrapper"):"__preactCompatWrapper";fe.prototype=new q,oe(fe.prototype,{constructor:fe,isReactComponent:{},getDOMNode:function(){return this.base},isMounted:function(){return!!this.base}});var et=e("/* Comment palette*/\n\n._count_m2a02_3 {\n    font-weight: bold;\n    color: #767676;\n}\n",{count:"_count_m2a02_3"}),tt=function(e){var t=e.count;return t?Y("h2",{className:"container__meta__title"},"comments ",Y("span",{className:et.count},"(",t,")")):Y("h2",{className:"container__meta__title"},"comments")},nt=e("/* Comment palette*/\n\n._underline_1lj47_3 {\n    text-decoration: none !important;\n    border-bottom: 1px solid #dcdcdc;\n    transition: border-color 0.15s ease-out;\n}\n\n._underline_1lj47_3:hover, ._underline_1lj47_3:focus {\n    border-color: #6e99b3;\n}\n\n._underline_1lj47_3:active {\n    border-color: #4bc6df;\n}\n\n._error_1lj47_18 {\n    margin-top: 0.5rem;\n    color: #d61d00;\n}\n\n._borderBox_1lj47_23 {\n    box-sizing: border-box;\n}\n",{underline:"_underline_1lj47_3",error:"_error_1lj47_18",borderBox:"_borderBox_1lj47_23"}),rt=e('/* Comment palette*/\n\n._container_tywwu_6 {\n    font-family: "Guardian Text Sans Web","Helvetica Neue",Helvetica,Arial,"Lucida Grande",sans-serif;\n}\n\n@media (min-width: 980px) {\n    ._container_tywwu_6 {\n        width: 160px;\n    }\n}\n\n._author_tywwu_16 {\n    font-size: 0.875rem;\n    line-height: 1.375rem;\n\n    overflow: hidden;\n    padding-right: 0.3125rem;\n    font-weight: bold;\n    text-overflow: ellipsis;\n}\n\n@media (min-width: 740px) {\n    ._author_tywwu_16 {\n        display: block;\n    }\n}\n\n._label_tywwu_31 {\n    font-size: 0.875rem;\n    line-height: 1.375rem;\n\n    color: #767676;\n}\n\n._avatarWrapper_tywwu_37 {\n    margin-right: 0.5rem;\n    margin-top: 0.125rem;\n}\n\n@media (max-width: 740px) {\n    ._avatarWrapper_tywwu_37 {\n        display: none;\n    }\n}\n\n@media (max-width: 980px) {\n    ._avatarWrapper_tywwu_37 {\n        float: left;\n    }\n}\n\n._avatarImage_tywwu_54 {\n    width: 36px;\n    height: 36px;\n    border-radius: 1000px;\n}\n\n@media (min-width: 980px) {\n    ._avatarImage_tywwu_54 {\n        width: 60px;\n        height: 60px;\n    }\n}\n',{container:"_container_tywwu_6",author:"_author_tywwu_16",label:"_label_tywwu_31",avatarWrapper:"_avatarWrapper_tywwu_37",avatarImage:"_avatarImage_tywwu_54"}),ot=function(e){var t=e.avatarImagesHost,n=e.displayName,r=e.userId,o=de(t,"user/",r||"undefined");return Y("div",{className:rt.container},Y("span",{className:rt.avatarWrapper},Y("img",{className:rt.avatarImage,alt:"",src:o})),Y("div",{className:nt.borderBox},Y("span",{className:rt.label},"Signed in as")," ",Y("span",{className:rt.author},n)))},it=function(e){var t=e.anonymous,n=e.avatarImagesHost,r=e.closed,o=e.loading,i=e.profile,a=e.profileUrl,s=e.profileClientId;if(o)return null;if(t||!i){var u=a+"/signin?INTCMP=DOTCOM_COMMENTS_SIGNIN"+(s?"&clientId="+s:""),l=a+"/register?INTCMP=DOTCOM_COMMENTS_REG"+(s?"&clientId="+s:"");return Y("p",{className:"container__meta__item"},Y("a",{className:nt.underline,href:u},"Sign in")," ","or"," ",Y("a",{className:nt.underline,href:l},"create your Guardian account")," ","to join the discussion.")}return r?Y("p",{className:"container__meta__item"},"This discussion is closed for comments."):(i.privateFields||{}).canPostComment===!1?Y("p",{className:["container__meta__item",nt.error].join(" ")},"Commenting has been disabled for this account (",Y("a",{href:"/community-faqs#321a"},"why?"),")"):Y(ot,{avatarImagesHost:n,userId:i.userId,displayName:i.displayName})},at=function(e){var t=e.anonymous,n=e.avatarImagesHost,r=e.children,o=e.closed,i=e.commentsCount,a=e.loading,s=e.profile,u=e.profileUrl,l=e.profileClientId;return Y("div",{className:"container__meta"},Y(tt,{count:i}),Y(it,{anonymous:t,avatarImagesHost:n,closed:o,loading:a,profile:s,profileUrl:u,profileClientId:l}),r)},st=t(function(e){function t(){}t.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){o.off(e,r),t.apply(n,arguments)}var o=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;for(r;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,a=r.length;i<a;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},e.exports=t}),ut=new st,lt=function(e){function t(e){xe(this,t);var n=ke(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={anonymous:!0,commentsCount:0,loading:!0,profile:null},n.api=n.props.api,n}return Te(t,e),Ne(t,[{key:"componentDidMount",value:function(){this.getCommentCount(),this.getUser()}},{key:"getCommentCount",value:function(){var e=this,t=this.props.id;this.api.commentCount(t).then(function(n){var r=n[t]||0;e.setState({commentsCount:r},function(){ut.emit("comment-count",r)})})}},{key:"getUser",value:function(){var e=this,t=this.props,n=t.user,r=t.userFromCookie;r?this.api.userProfile().then(function(t){e.setState({profile:t,anonymous:!1,loading:!1})}):this.setState(n?{profile:n,anonymous:!1,loading:!1}:{anonymous:!0,loading:!1})}},{key:"whenLoaded",value:function(e,t){if(e&&this.state.loading===!1)return t}},{key:"render",value:function(){var e=this.props,t=e.avatarImagesHost,n=e.id,r=e.closed,o=e.profileUrl,i=e.profileClientId;return Y(at,Pe({},this.state,{avatarImagesHost:t,id:n,closed:r,profileUrl:o,profileClientId:i}))}}]),t}(fe);return function(e){function t(e){if("string"!=typeof e&&(e+=""),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e+=""),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function u(e){var t=new FileReader;return t.readAsText(e),a(t)}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=""+e;else if(e){if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob?(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=i(this);return e?e:Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=c(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function p(e){var t=new o,n=(e.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),o=n.join(":").trim();t.append(r,o)}),t}function h(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof o?t.headers:new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(r)},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[]},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=[n(r)]},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},m.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},l.call(f.prototype),l.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},h.error=function(){var e=new h(null,{status:0,statusText:""});return e.type="error",e};var y=[301,302,303,307,308];h.redirect=function(e,t){if(y.indexOf(t)===-1)throw new RangeError("Invalid status code");return new h(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=f,e.Response=h,e.fetch=function(e,t){return new Promise(function(n,r){function o(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var i;i=f.prototype.isPrototypeOf(e)&&!t?e:new f(e,t);var a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:p(a),url:o()},t="response"in a?a.response:a.responseText;n(new h(t,e))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&m.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0),me});
//# sourceMappingURL=discussion-frontend.preact.amd.e34499b4c4.js.map